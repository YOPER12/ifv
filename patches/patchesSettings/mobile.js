import { generateSettingsList } from './generateSettingsList.js';
import { waitForRender } from '../apis/waitForElement.js';

function addMobileSettings() {
    const settingsButton = document.createElement("div");
    settingsButton.innerHTML = `<div class="icon" style="content: url(&quot;data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIGhlaWdodD0iMzJweCIgdmlld0JveD0iMCAtOTYwIDk2MCA5NjAiIHdpZHRoPSIzMnB4IiBmaWxsPSIjZmZmIj48cGF0aCBkPSJNNDI5Ljc0LTEwMHEtMTQuMSAwLTI0Ljg1LTkuMjQtMTAuNzYtOS4yNS0xMi45MS0yMy4xNGwtMTIuNzUtODguMzlxLTE5LjA1LTYuNDYtNDAuNDctMTguNTktMjEuNDMtMTIuMTMtMzcuMy0yNS43N2wtODAuOTUgMzYuNDlxLTEzLjU2IDUuNzQtMjcuMTkgMS4yOHQtMjEuMTktMTcuMmwtNTAuNjItODguOThxLTcuNTYtMTIuNzQtNC4zOC0yNi40NSAzLjE4LTEzLjcgMTQuOTctMjIuNjhMMjA1LjE2LTQzN3EtMS44LTEwLTIuNTgtMjEuMzEtLjc4LTExLjMxLS43OC0yMS4zMSAwLTkuNjEuNzgtMjAuODUuNzgtMTEuMjUgMi41OC0yMi41M2wtNzMuMDYtNTQuMzNxLTExLjc5LTguOTgtMTQuNzgtMjIuODgtMi45OS0xMy44OSA0LjU4LTI2LjY0bDUwLjIzLTg3LjgycTcuNTYtMTIuMzUgMjEuMTktMTcuMDEgMTMuNjMtNC42NSAyNy4xOSAxLjA5bDgwLjU3IDM1Ljg1cTE3LjAyLTEzLjc3IDM3Ljc4LTI1LjcxIDIwLjc2LTExLjkzIDM5Ljk5LTE4LjExbDEzLjEzLTg5LjA1cTIuMTUtMTMuOSAxMi45MS0yMy4xNSAxMC43NS05LjI0IDI0Ljg1LTkuMjRoMTAwLjUycTE0LjEgMCAyNC44NSA5LjI0IDEwLjc2IDkuMjUgMTIuOTEgMjMuMTVsMTIuNzUgODguNzZxMjAuNzIgNy42MiA0MC4yOSAxOC41OCAxOS41OCAxMC45NiAzNi4zMiAyNS41M2w4Mi40OS0zNS44NXExMy41Ny01Ljc0IDI2Ljk5LTEuMDkgMTMuNDIgNC42NiAyMC45OCAxNy4wMWw1MC42NSA4OC4yMXE3LjU2IDEyLjc0IDQuMzggMjYuNzgtMy4xOCAxNC4wNC0xNC45NyAyMi4zNWwtNzQuNTkgNTQuNDFxMi41NiAxMS4xOCAzLjA5IDIyLjA0LjUyIDEwLjg1LjUyIDIwLjg4IDAgOS42NC0uNzIgMjAuMy0uNzEgMTAuNjUtMy4xIDIyLjczbDczLjQ0IDU0LjNxMTEuNzkgOC4zMSAxNS4xNiAyMi4zNSAzLjM4IDE0LjA0LTQuMTkgMjYuNzhsLTUwLjE4IDg4LjU5cS03LjgyIDEyLjc0LTIxLjY0IDE3LjItMTMuODIgNC40Ny0yNy4xMy0xLjI4bC04MS4xOC0zNi40OHEtMTcuNDEgMTQuNDEtMzcgMjYuMjktMTkuNTkgMTEuODktMzkuNjEgMTguMDdsLTEyLjc1IDg4Ljc3cS0yLjE1IDEzLjg5LTEyLjkxIDIzLjE0LTEwLjc1IDkuMjQtMjQuODUgOS4yNEg0MjkuNzRabTguMzYtNTAuMjZoODMuMDhsMTQuMzgtMTEwLjEycTMxLjQ0LTggNTguMjctMjMuNDggMjYuODQtMTUuNDcgNTEuNDUtMzkuNDVsMTAyLjc3IDQ0LjA4IDM5LjgtNjkuOS05MC41Ny02Ny4yOHE0LjM0LTE3LjAzIDYuNDgtMzIuNDkgMi4xNC0xNS40NiAyLjE0LTMxLjEgMC0xNi4yOC0xLjk0LTMxLjM2LTEuOTMtMTUuMDgtNi42OC0zMS40Nmw5MS4zNC02OC4wNS0zOS44LTY5LjktMTAzLjkyIDQ0LjI4cS0yMC43NS0yMi45NS00OS45NC00MC40OC0yOS4xOS0xNy41NC01OS43OC0yMi42NUw1MjEuOS04MDkuNzRoLTgzLjU5TDQyNS4wOC03MDBxLTMyLjM2IDYuODItNTkuNjQgMjIuNDktMjcuMjkgMTUuNjYtNTEuMjMgNDAuNDNsLTEwMy4wMy00My42OS0zOS44IDY5LjkgOTAuNDQgNjYuNjlxLTQuNTkgMTUuMzEtNi43OSAzMS4zMS0yLjIxIDE2LTIuMjEgMzMuMjUgMCAxNi4yOSAyLjIxIDMxLjkgMi4yIDE1LjYyIDYuNDEgMzEuMzFsLTkwLjA2IDY3LjI4IDM5LjggNjkuOSAxMDIuNjQtNDMuOXEyMy41OSAyNC4wNSA1MSAzOS41OVEzOTIuMjMtMjY4IDQyNC42OS0yNjBsMTMuNDEgMTA5Ljc0Wm00MS4yOC0yMTQuNjFxNDguMDMgMCA4MS41OC0zMy41NVQ1OTQuNTEtNDgwcTAtNDguMDMtMzMuNTUtODEuNTh0LTgxLjU4LTMzLjU1cS00Ny45NyAwLTgxLjU1IDMzLjU1LTMzLjU3IDMzLjU1LTMzLjU3IDgxLjU4dDMzLjU3IDgxLjU4cTMzLjU4IDMzLjU1IDgxLjU1IDMzLjU1Wk00ODAtNDgwWiIvPjwvc3ZnPg==&quot;);"></div><span class="name">Ustawienia ifv</span>`;
    settingsButton.addEventListener("click", async () => {
        console.debug(await generateSettingsList());
    });
    waitForRender(() => document.querySelector(".more-popup.list-modal div")).then(() => {
        document.querySelectorAll(".more-popup.list-modal div")[1].appendChild(settingsButton);
    });
}

window.appendModule({
    run: addMobileSettings,
    onlyOnReloads: true,
    doesRunHere: () => [
        "uczen.eduvulcan.pl",
        "dziennik-uczen.vulcan.net.pl"
    ].includes(window.location.hostname) && window.innerWidth < 1024,
});